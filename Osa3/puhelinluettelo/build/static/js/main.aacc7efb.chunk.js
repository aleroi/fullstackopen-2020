(this.webpackJsonppuhluettelo=this.webpackJsonppuhluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(14),c=t.n(o),u=(t(20),t(4)),l=t(2),i=function(e){var n=e.filter,t=e.onFilterChange;return a.a.createElement("p",null,"filter shown with ",a.a.createElement("input",{value:n,onChange:t}))},m=function(e){return a.a.createElement("form",{onSubmit:e.handleAddPerson},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.person,t=e.onDelete;return a.a.createElement("li",null,n.name," ",n.number,a.a.createElement("button",{onClick:function(){return t(n)}},"Delete person"))},f=function(e){var n=e.persons,t=e.filter,r=e.onDelete;return a.a.createElement("ul",null,n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return a.a.createElement(s,{key:e.name,person:e,onDelete:r})})))},d=t(3),h=t.n(d),p="/api/persons",b=function(e){return e.then((function(e){return e.data}))},E=function(){return b(h.a.get(p))},g=function(e){return b(h.a.post(p,e))},v=function(e,n){return b(h.a.put("".concat(p,"/").concat(e),n))},w=function(e){return h.a.delete("".concat(p,"/").concat(e))},j=function(e){var n=e.message;if(null===n)return null;var t={color:n.isError?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return a.a.createElement("div",{style:t},n.content)},O=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),d=s[0],h=s[1],p=Object(r.useState)(""),b=Object(l.a)(p,2),O=b[0],C=b[1],k=Object(r.useState)(""),y=Object(l.a)(k,2),N=y[0],S=y[1],D=Object(r.useState)(null),x=Object(l.a)(D,2),B=x[0],I=x[1],P=null===B?null:B.content,U=null===B?null:B.isError;Object(r.useEffect)((function(){E().then((function(e){return o(e)}))}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){return I(null)}),5e3);return function(){return clearInterval(e)}}),[P,U]);return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(j,{message:B}),a.a.createElement(i,{filter:N,onFilterChange:function(e){return S(e.target.value)}}),a.a.createElement("h2",null,"add a new"),a.a.createElement(m,{handleAddPerson:function(e){e.preventDefault(),function(e,n){return e.filter((function(e){return e.name===n})).length>0}(t,d)?window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&function(e){var n=t.find((function(n){return n.name===e})),r=Object(u.a)(Object(u.a)({},n),{},{number:O});v(r.id,r).then((function(e){o(t.map((function(t){return t.id!==n.id?t:e}))),I({content:"Updated ".concat(r.name,"."),isError:!1})})),h(""),C("")}(d):(g({name:d,number:O}).then((function(e){o(t.concat(e)),I({content:"Created ".concat(e.name,"."),isError:!1})})).catch((function(e){console.log(e.response.data),I({content:e.response.data.error,isError:!0})})),h(""),C(""))},handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return C(e.target.value)},newName:d,newNumber:O}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(f,{persons:t,filter:N,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(w(e.id).then((function(){o(t.filter((function(n){return n.id!==e.id}))),I({content:"Deleted ".concat(e.name,"."),isError:!1})})).catch((function(n){I({content:"Information of ".concat(e.name," has already removed from server"),isError:!0})})),h(""),C(""))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.aacc7efb.chunk.js.map